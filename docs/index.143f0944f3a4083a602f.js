(()=>{"use strict";var t='\n<form id="add-form" class="form">\n  <h3 class="form__title">Отзыв:</h3>\n  <div class="form__row">\n    <input type="text" placeholder="Укажите ваше имя" name="author" class="form__input">\n  </div>\n  <div class="form__row">\n    <input type="text" placeholder="Укажите место" name="place" class="form__input">\n  </div>\n  <div class="form__row">\n    <textarea placeholder="Оставить отзыв" name="review" class="form__input form__input--textarea"></textarea>\n  </div>\n  <button id="add-btn" class="btn">Добавить</button>\n</form>\n';function c(e,t,n,o,r,a,i){try{var s=e[a](i);var c=s.value}catch(e){n(e);return}if(s.done){t(c)}else{Promise.resolve(c).then(o,r)}}function e(s){return function(){var e=this,i=arguments;return new Promise(function(t,n){var o=s.apply(e,i);function r(e){c(o,t,n,r,a,"next",e)}function a(e){c(o,t,n,r,a,"throw",e)}r(undefined)})}}var a;document.addEventListener("DOMContentLoaded",()=>{a=window.ymaps;a.ready(n)});var i;function n(){var n=new a.Map("map",{center:[55.76,37.64],zoom:12,controls:["zoomControl"]});n.events.add("click",function(e){var t=e.get("coords");d(n,t,[])});i=new a.Clusterer({clusterDisableClickZoom:true});i.options.set("hasBalloon",false);l(n);i.events.add("click",function(e){var t=e.get("target").getGeoObjects();d(n,e.get("coords"),t)})}function s(){var e=localStorage.reviews;return JSON.parse(e||"[]")}function r(n){var o="";var e=function e(t){if(n.some(e=>JSON.stringify(e.geometry._coordinates)===JSON.stringify(t.coords))){o+='\n      <div class="review">\n        <div><strong>Место: </strong>'.concat(t.place,"</div>\n        <div><strong>Имя: </strong>").concat(t.author,'</div>\n        <div class="review-text"><strong>Отзыв: </strong>').concat(t.reviewText,"</div>\n      </div>\n      ")}};for(var t of s()){e(t)}return o}function l(o){var r=[];var e=function e(t){var n=new a.Placemark(t.coords);n.events.add("click",e=>{e.stopPropagation();d(o,t.coords,[e.get("target")])});r.push(n)};for(var t of s()){e(t)}i.removeAll();o.geoObjects.remove(i);i.add(r);o.geoObjects.add(i)}function d(e,t,n){return o.apply(this,arguments)}function o(){o=e(function*(n,o,e){yield n.balloon.open(o,{content:'<div class="reviews">'.concat(r(e),"</div>")+t});document.querySelector("#add-form").addEventListener("submit",function(e){e.preventDefault();var t={coords:o,author:this.elements.author.value,place:this.elements.place.value,reviewText:this.elements.review.value};localStorage.reviews=JSON.stringify([...s(),t]);l(n);n.balloon.close()})});return o.apply(this,arguments)}})();
//# sourceMappingURL=index.143f0944f3a4083a602f.js.map